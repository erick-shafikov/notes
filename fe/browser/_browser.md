# Браузер

# Установка соединения

[первая стадия - обмен сообщениями между клиентом-сервером](../../net/interaction.md) за эту часть отвечает network stack, работа происходит через api сокетов

# Получение данных страницы

Процесс браузера - это главный процесс, который отвечает за работу пользовательского интерфейса. Порядок скачивания синхронный, но браузер может распараллелить загрузку разметки с загрузкой js, css. HTML и CSS имеют высокий приоритет, скрипты средний - можно управлять async/defer. Изображения - низкий приоритет, можно менять с помощью link=preload.

# DOM

Токенизация и построение дерева, обработка блокирующих скриптов (без async и defer). Построение дерева может занимать весь поток процесса. Может помочь сканер пред-загрузки. async не будет блокировать выполнения построения dom, defer если порядок важен. CSS не блокирует парсинг HTML, но блокирует JS так как JS может использовать селекторы. Процесс построения DOM устойчив к ошибкам синтаксиса

# CSSOM

независимы друг от друга (DOM и CSSOM). Построение начинается с более общих правил до специфичных. Повторное вычисление стилей (Recalculate Styles) - показатель общее время обработки стилей. Каждый браузер имеет свои предопределенные стили. Браузеры обычно ждут загрузки css

# JS

js после загрузки компилируется, обрабатывается и исполняется. Преобразуется в AST, которое преобразуется в байт-код, который исполняется в основном потоке.

# AOM

дерево доступности - пока не построится контент не готов для голосовых помощников

# отрисовка контента

[Далее проходят стадии отрисовки контента](./painting-stages.md)
