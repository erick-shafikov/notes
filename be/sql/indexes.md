# Индексы

Два типа операции - читать, писать. Индексы ускоряют эти две операции
Все данные хранятся в произвольном порядке. При поиске проходится по всем рядам. Если добавить индексы - это привязка локации в памяти к уникальным id (индексы). Нужны только для больших таблиц

Типы:

- b-tree index - многоуровневое дерево, бьет дату по блокам, удобно если много уникальных элементов

- bitmap index - мало данных, но каждый из них огромный. Кодирует упоминание элементов в строках по битам, где 1000 - 4 строки, элемент упоминается в 1 строке
  (+) быстро искать - так как нужно обновить индекс, избегает обхода по всей таблице
  (-) медленно писать

```sql
CREATE INDEX index_name
ON table_name [USING method]
(
  column_name
)

--сброс
DROP INDEX index_name
```

для запроса

```sql
SELECT
(
  SELECT AVG(amount)
  FROM payment p2
  WHERE p2.rental_id = p1.rental_id
)
FROM payment p1
```

```sql
CREATE INDEX index_rental id_payment
ON payment
(rental_id)
```
