# кеширование

Виды:

- приватные - для отдельного пользователя в браузере, используется для навигации назад-вперед. При первом запросе страница скачивается в кеш браузера, а последующие запросы возвращают кешированную копию. Управляется заголовком Expires со значением даты когда кеш становится невалидным
- совместного пользования - кеш на прокси, провайдер кеширует данные
- реверсивный прокси сервер - при использовании динамические страницы с запросами на сервер и бд, он кеширует страницы с одинаковыми данными

Кешируют только get-запросы:

- с ответом 200 ок get на запрос html, картинок, файлов
- 301
- 404
- 206

Управление осуществляется заголовком Cache-control:

- со значениями:
- - no-store - нельзя хранить страницу
- - no-cache - перед показом копии узнать изменилась ли
- - must-revalidate
- приватный/не - private, public - на прокси и браузере
- время - max-age=31536000
- актуальность must-revalidate

Conditional get запрос позволяет узнать изменился ли ресурс, управляется тегом

- ETag - токен содержимого файла, у одинаковых файлов он одинаковый, если нужно проверить, то браузер добавляет заголовок:
- - if-none-match со значением хеша
- - if-modified-since - с датой изменения
- Vary

Если ресурс не изменился то отправляется 304 not modified + заголовки, если ресурс изменился - 200
