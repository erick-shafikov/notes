# подсказки

Заголовки по типам:

- Заголовки устройства (отправляет браузер, далее б):
- - Sec-CH-UA-\* - подсказки клиента User Agent
- - Sec-CH-UA - версия браузера
- - Sec-CH-UA-Platform - платформа
- - Sec-CH-UA-Mobile: ?1 или ?2 - работает ли на мобильном устройстве
- - Sec-CH-UA-Model - модель
- - Sec-CH-UA-Form-Factors - форм факторы
- запрос на доп заголовки (от сервера, далее с)
- - Accept-CH: Sec-CH-UA-Model, Sec-CH-UA-Form-Factors, DPR, Viewport-Width, Width - сервер требует доп информацию, браузер на каждый запрос будет отправлять Sec-CH-UA-Model, Sec-CH-UA-Form-Factors. Поведение можно реализовать в html:
    ```html
    <meta http-equiv="Accept-CH" content="Width, Downlink, Sec-CH-UA" />
    ```
- Кеширование:
- - Vary, значения:
- - - Accept-Encoding - хранить одну копию, сжатую с помощью gzip, и другую — с помощью brotli
- - - Accept-Language - хранить отдельные версии для en-US и de-DE
- - - Cookie - каждый уникальный куки создает отдельную запись в кэше (что нередко приводит к катастрофическим последствиям)
- - - Vary: \* - означает «нельзя безопасно использовать этот ответ для других пользователей», что фактически отключает кэширование
- - Cache-Control, значения:
- - - max-age - кол-во секунд сколько считать ответ актуальным
- - - s-maxage - для общих кешей
- - - immutable - никогда не изменится
- - - stale-while-revalidate - позволяет отдать устаревший, пока запрашивается актуальный
- - - stale-if-error - отдаст устаревший, если ошибка сервера
- - - Cache-Control, варианты для ответа:
- - - - public — ответ может храниться любым кэшем, включая общие
- - - - private — ответ может кэшироваться только браузером, общие кэши использовать его не могут
- - - - no-cache — хранить, но проверять актуальность перед выдачей
- - - - no-store — не хранить вообще
- - - - must-revalidate — после устаревания ответ нужно обязательно проверить перед использованием
- - - Cache-Control, варианты для запроса:
- - - - no-cache — принудительная проверка актуальности (при этом можно использовать уже сохраненные записи)
- - - - no-store — полностью игнорировать кэш
- - - - only-if-cached — вернуть ответ только из кэша, если он доступен; иначе — ошибка (полезно для работы офлайн)
- - - - max-age, min-fresh, max-stale — позволяют гибко управлять допустимым временем устаревания ответа
- - - proxy-revalidate — то же самое, но для общих кэшей
- - Expires - пример: Expires: Wed, 29 Aug 2025 12:00:00 GMT
- - ETag - "abc123" - ресурс идентичен побайтово, W/"abc123" - семантически тот же
- - Last-Modified
- - Date - когда был сформирован ответ
- - Age - у общих кешей
- Критические
- - Sec-CH-Prefers-Reduced-Motion - может использоваться в Accept-CH
- Заголовки согласования контента - не являются частью стандарта, сервер сам определяет какой контент отдать:
- - Accept - mime типы
- - Accept-Encoding
- - Accept-Language
- - User-Agent
- - Vary - какие заголовки учитывать
- Апгрейд протокола
- - Connection: upgrade - вернет 101 статус если изменит протокол или , также есть перечень заголовков для websocket протокола
- - Upgrade: example/1, foo/2
